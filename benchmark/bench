#!/bin/bash

if [ $# -lt 3 ]; then
    echo 'bench <input> <output> <lines>'
    echo 'e.g.: release input1.txt bench1.txt'
    exit 0
fi


RUNNERS=('pyrex' 'python' 'ruby' 'csharp' 'java')

for runner in "${RUNNERS[@]}"
do
    echo -n Running ${runner}...
    mv $2 $2.tmp
    "./bench_${runner}" < $1 | sed -n -e $3 | paste $2.tmp - > $2
    rm $2.tmp
    echo OK
done

